<UserControl
    x:Class="BankDds.Wpf.Views.TransactionsView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converters="clr-namespace:BankDds.Wpf.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    d:DesignHeight="700"
    d:DesignWidth="1200"
    Background="White"
    mc:Ignorable="d">
    <UserControl.Resources>
        <converters:BoolToVisibilityConverter x:Key="BoolToVisConverter" />
    </UserControl.Resources>
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <TextBlock
            Grid.Row="0"
            Style="{StaticResource PageTitleStyle}"
            Text="Transaction Management" />
        <Border
            Grid.Row="1"
            Margin="0,0,0,10"
            Padding="10"
            Background="#FFF3CD"
            BorderBrush="#FFC107"
            BorderThickness="1"
            CornerRadius="5"
            Visibility="{Binding HasError, Converter={StaticResource BoolToVisConverter}}">
            <TextBlock
                FontWeight="SemiBold"
                Foreground="#856404"
                Text="{Binding ErrorMessage}"
                TextWrapping="Wrap" />
        </Border>
        <TabControl Grid.Row="2" SelectedIndex="{Binding SelectedTabIndex}">
            <TabItem Header="Deposit/Withdraw">
                <Grid Margin="15">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="400" />
                        <ColumnDefinition Width="20" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Border
                        Grid.Column="0"
                        Padding="15"
                        Background="#F8F9FA"
                        BorderBrush="#DEE2E6"
                        BorderThickness="1"
                        CornerRadius="5">
                        <StackPanel>
                            <TextBlock Style="{StaticResource SectionTitleStyle}" Text="Transaction Details" />
                            <TextBlock Style="{StaticResource StandardLabelStyle}" Text="Account Number:" />
                            <TextBox
                                Margin="0,0,0,15"
                                Style="{StaticResource StandardTextBoxStyle}"
                                Text="{Binding SelectedAccountNumber, UpdateSourceTrigger=PropertyChanged}" />
                            <TextBlock Style="{StaticResource StandardLabelStyle}" Text="Amount:" />
                            <TextBox
                                Margin="0,0,0,5"
                                Style="{StaticResource StandardTextBoxStyle}"
                                Text="{Binding Amount, UpdateSourceTrigger=PropertyChanged}" />
                            <TextBlock
                                Margin="0,0,0,15"
                                FontSize="11"
                                FontStyle="Italic"
                                Foreground="Gray"
                                Text="Minimum: 100,000 VND" />
                            <Button
                                x:Name="Deposit"
                                Margin="0,0,0,10"
                                Content="Deposit"
                                Style="{StaticResource SuccessButtonStyle}" />
                            <Button
                                x:Name="Withdraw"
                                Margin="0"
                                Content="Withdraw"
                                Style="{StaticResource DangerButtonStyle}" />
                        </StackPanel>
                    </Border>
                    <GroupBox
                        Grid.Column="2"
                        FontSize="14"
                        FontWeight="SemiBold"
                        Header="Recent Transactions">
                        <DataGrid ItemsSource="{Binding RecentTransactions}" Style="{StaticResource StandardDataGridStyle}">
                            <DataGrid.Columns>
                                <DataGridTextColumn
                                    Width="100"
                                    Binding="{Binding MAGD}"
                                    Header="Trans. ID" />
                                <DataGridTextColumn
                                    Width="80"
                                    Binding="{Binding LOAIGD}"
                                    Header="Type" />
                                <DataGridTextColumn
                                    Width="120"
                                    Binding="{Binding NGAYGD, StringFormat=dd/MM/yyyy}"
                                    Header="Date" />
                                <DataGridTextColumn
                                    Width="*"
                                    Binding="{Binding SOTIEN, StringFormat=N0}"
                                    Header="Amount" />
                            </DataGrid.Columns>
                        </DataGrid>
                    </GroupBox>
                </Grid>
            </TabItem>
            <TabItem Header="Transfer">
                <Grid Margin="15">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="400" />
                        <ColumnDefinition Width="20" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Border
                        Grid.Column="0"
                        Padding="15"
                        Background="#F8F9FA"
                        BorderBrush="#DEE2E6"
                        BorderThickness="1"
                        CornerRadius="5">
                        <StackPanel>
                            <TextBlock Style="{StaticResource SectionTitleStyle}" Text="Transfer Details" />
                            <TextBlock Style="{StaticResource StandardLabelStyle}" Text="From Account:" />
                            <TextBox
                                Margin="0,0,0,15"
                                Style="{StaticResource StandardTextBoxStyle}"
                                Text="{Binding SelectedAccountNumber, UpdateSourceTrigger=PropertyChanged}" />
                            <TextBlock Style="{StaticResource StandardLabelStyle}" Text="To Account:" />
                            <TextBox
                                x:Name="TransferToAccount"
                                Margin="0,0,0,15"
                                Style="{StaticResource StandardTextBoxStyle}"
                                Text="{Binding TransferToAccount, UpdateSourceTrigger=PropertyChanged}" />
                            <TextBlock Style="{StaticResource StandardLabelStyle}" Text="Amount:" />
                            <TextBox
                                Margin="0,0,0,5"
                                Style="{StaticResource StandardTextBoxStyle}"
                                Text="{Binding Amount, UpdateSourceTrigger=PropertyChanged}" />
                            <TextBlock
                                Margin="0,0,0,15"
                                FontSize="11"
                                FontStyle="Italic"
                                Foreground="Gray"
                                Text="Minimum: &gt; 0 VND" />
                            <Button
                                x:Name="Transfer"
                                Margin="0"
                                Content="Transfer"
                                Style="{StaticResource WarningButtonStyle}" />
                        </StackPanel>
                    </Border>
                    <GroupBox
                        Grid.Column="2"
                        FontSize="14"
                        FontWeight="SemiBold"
                        Header="Recent Transactions">
                        <DataGrid ItemsSource="{Binding RecentTransactions}" Style="{StaticResource StandardDataGridStyle}">
                            <DataGrid.Columns>
                                <DataGridTextColumn
                                    Width="100"
                                    Binding="{Binding MAGD}"
                                    Header="Trans. ID" />
                                <DataGridTextColumn
                                    Width="80"
                                    Binding="{Binding LOAIGD}"
                                    Header="Type" />
                                <DataGridTextColumn
                                    Width="100"
                                    Binding="{Binding NGAYGD, StringFormat=dd/MM/yyyy}"
                                    Header="Date" />
                                <DataGridTextColumn
                                    Width="120"
                                    Binding="{Binding SOTIEN, StringFormat=N0}"
                                    Header="Amount" />
                                <DataGridTextColumn
                                    Width="*"
                                    Binding="{Binding SOTK_NHAN}"
                                    Header="To Account" />
                            </DataGrid.Columns>
                        </DataGrid>
                    </GroupBox>
                </Grid>
            </TabItem>
        </TabControl>
    </Grid>
</UserControl>
