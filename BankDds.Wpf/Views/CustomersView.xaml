<UserControl
    x:Class="BankDds.Wpf.Views.CustomersView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:converters="clr-namespace:BankDds.Wpf.Converters"
    d:DesignHeight="700"
    d:DesignWidth="1100"
    Background="White"
    mc:Ignorable="d">
    <UserControl.Resources>
        <converters:BoolToVisibilityConverter x:Key="BoolToVisConverter" />
        <converters:NullToBoolConverter x:Key="NullToBoolConverter" />
    </UserControl.Resources>
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <TextBlock
            Grid.Row="0"
            Margin="0,0,0,15"
            FontSize="24"
            FontWeight="Bold"
            Foreground="#0078D7"
            Text="Customer Management" />

        <StackPanel
            Grid.Row="1"
            Margin="0,0,0,15"
            Orientation="Horizontal">
            <Button
                x:Name="Add"
                Margin="0,0,10,0"
                Padding="15,8"
                Background="#0078D7"
                BorderThickness="0"
                Content="Add New"
                Foreground="White"
                Cursor="Hand" />
            <Button
                x:Name="Edit"
                Margin="0,0,10,0"
                Padding="15,8"
                Background="#FF8C00"
                BorderThickness="0"
                Content="Edit"
                Foreground="White"
                Cursor="Hand" />
            <Button
                x:Name="Delete"
                Padding="15,8"
                Background="#DC143C"
                BorderThickness="0"
                Content="Delete"
                Foreground="White"
                Cursor="Hand" />
        </StackPanel>

        <DataGrid
            x:Name="Customers"
            Grid.Row="2"
            AutoGenerateColumns="False"
            CanUserAddRows="False"
            IsReadOnly="True"
            SelectedItem="{Binding SelectedCustomer, Mode=TwoWay}">
            <DataGrid.Columns>
                <DataGridTextColumn Width="120" Binding="{Binding CMND}" Header="CMND" />
                <DataGridTextColumn Width="150" Binding="{Binding Ho}" Header="Last Name" />
                <DataGridTextColumn Width="100" Binding="{Binding Ten}" Header="First Name" />
                <DataGridTextColumn Width="*" Binding="{Binding DiaChi}" Header="Address" />
                <DataGridTextColumn Width="120" Binding="{Binding SDT}" Header="Phone" />
                <DataGridTextColumn Width="80" Binding="{Binding Phai}" Header="Gender" />
                <DataGridTextColumn Width="100" Binding="{Binding MaCN}" Header="Branch" />
            </DataGrid.Columns>
        </DataGrid>

        <Border
            Grid.Row="2"
            Padding="0"
            Background="White"
            BorderBrush="#0078D7"
            BorderThickness="2"
            CornerRadius="8"
            Visibility="{Binding IsEditing, Converter={StaticResource BoolToVisConverter}}">
            <Border.Effect>
                <DropShadowEffect BlurRadius="15" Direction="270" Opacity="0.3" ShadowDepth="5" Color="Black" />
            </Border.Effect>
            <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="20">
                <StackPanel>
                    <TextBlock Margin="0,0,0,20" FontSize="18" FontWeight="Bold" Foreground="#0078D7" Text="Customer Details" />
                    
                    <TextBlock Margin="0,0,0,5" FontWeight="SemiBold" Text="CMND:" />
                    <TextBox Margin="0,0,0,12" Padding="10" FontSize="14" 
                             IsEnabled="{Binding SelectedCustomer, Converter={StaticResource NullToBoolConverter}}"
                             Text="{Binding EditingCustomer.CMND, UpdateSourceTrigger=PropertyChanged}" />

                    <TextBlock Margin="0,0,0,5" FontWeight="SemiBold" Text="Last Name:" />
                    <TextBox Margin="0,0,0,12" Padding="10" FontSize="14"
                             Text="{Binding EditingCustomer.Ho, UpdateSourceTrigger=PropertyChanged}" />

                    <TextBlock Margin="0,0,0,5" FontWeight="SemiBold" Text="First Name:" />
                    <TextBox Margin="0,0,0,12" Padding="10" FontSize="14"
                             Text="{Binding EditingCustomer.Ten, UpdateSourceTrigger=PropertyChanged}" />

                    <TextBlock Margin="0,0,0,5" FontWeight="SemiBold" Text="Address:" />
                    <TextBox Margin="0,0,0,12" Padding="10" FontSize="14"
                             Text="{Binding EditingCustomer.DiaChi, UpdateSourceTrigger=PropertyChanged}" />

                    <TextBlock Margin="0,0,0,5" FontWeight="SemiBold" Text="Phone:" />
                    <TextBox Margin="0,0,0,12" Padding="10" FontSize="14"
                             Text="{Binding EditingCustomer.SDT, UpdateSourceTrigger=PropertyChanged}" />

                    <TextBlock Margin="0,0,0,5" FontWeight="SemiBold" Text="Gender:" />
                    <ComboBox Margin="0,0,0,12" Padding="10" FontSize="14" SelectedValue="{Binding EditingCustomer.Phai}">
                        <ComboBoxItem Content="Nam" />
                        <ComboBoxItem Content="Nu" />
                    </ComboBox>

                    <TextBlock Margin="0,0,0,5" FontWeight="SemiBold" Text="Branch:" />
                    <TextBox Margin="0,0,0,20" Padding="10" FontSize="14" IsReadOnly="True" Background="#F0F0F0"
                             Text="{Binding EditingCustomer.MaCN, UpdateSourceTrigger=PropertyChanged}" />

                    <StackPanel HorizontalAlignment="Right" Orientation="Horizontal">
                        <Button x:Name="Save" Margin="0,0,10,0" Padding="25,10" Background="#28A745" BorderThickness="0"
                                Content="Save" Cursor="Hand" FontSize="14" FontWeight="SemiBold" Foreground="White" />
                        <Button x:Name="Cancel" Padding="25,10" Background="#6C757D" BorderThickness="0"
                                Content="Cancel" Cursor="Hand" FontSize="14" FontWeight="SemiBold" Foreground="White" />
                    </StackPanel>
                </StackPanel>
            </ScrollViewer>
        </Border>

        <TextBlock x:Name="ErrorMessage" Grid.Row="3" Margin="0,10,0,0" FontWeight="Bold" Foreground="Red" TextWrapping="Wrap" />
    </Grid>
</UserControl>
